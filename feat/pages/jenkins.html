<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç¬”è®°</title>
    <meta name="description" content="">
    <link rel="icon" href="/blog/logo.ico">
    <meta name="referrer" content="never">
    <link rel="preload" href="/blog/assets/css/0.styles.dc50d109.css" as="style"><link rel="preload" href="/blog/assets/js/app.7e52a773.js" as="script"><link rel="preload" href="/blog/assets/js/2.49ba155e.js" as="script"><link rel="preload" href="/blog/assets/js/10.6f95f390.js" as="script"><link rel="prefetch" href="/blog/assets/js/11.923cbd96.js"><link rel="prefetch" href="/blog/assets/js/12.dd434dc0.js"><link rel="prefetch" href="/blog/assets/js/13.eb9f3a91.js"><link rel="prefetch" href="/blog/assets/js/14.66ca09d1.js"><link rel="prefetch" href="/blog/assets/js/15.11a1fd0a.js"><link rel="prefetch" href="/blog/assets/js/16.89fe4eea.js"><link rel="prefetch" href="/blog/assets/js/17.4aa9182e.js"><link rel="prefetch" href="/blog/assets/js/18.4a26d176.js"><link rel="prefetch" href="/blog/assets/js/3.6b0d47ed.js"><link rel="prefetch" href="/blog/assets/js/4.fadcb688.js"><link rel="prefetch" href="/blog/assets/js/5.146a072b.js"><link rel="prefetch" href="/blog/assets/js/6.537327aa.js"><link rel="prefetch" href="/blog/assets/js/7.58746721.js"><link rel="prefetch" href="/blog/assets/js/8.b769c333.js"><link rel="prefetch" href="/blog/assets/js/9.81a795d5.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.dc50d109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/home/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/blog/problem/" class="nav-link">é—®é¢˜</a></div><div class="nav-item"><a href="/blog/feat/" class="nav-link router-link-active">æŠ€æœ¯æ²‰æ·€</a></div><div class="nav-item"><a href="https://github.com/GavinHe322" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/home/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/blog/problem/" class="nav-link">é—®é¢˜</a></div><div class="nav-item"><a href="/blog/feat/" class="nav-link router-link-active">æŠ€æœ¯æ²‰æ·€</a></div><div class="nav-item"><a href="https://github.com/GavinHe322" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ç¯å¢ƒæ­å»º</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/feat/pages/jenkins.html" class="active sidebar-link">jenkins</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/feat/pages/jenkins.html#jenkins" class="sidebar-link">Jenkins</a></li><li class="sidebar-sub-header"><a href="/blog/feat/pages/jenkins.html#ç›®å½•" class="sidebar-link">ç›®å½•</a></li></ul></li><li><a href="/blog/feat/pages/node.html" class="sidebar-link">node</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å®æˆ˜</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><h2 id="jenkins"><a href="#jenkins" class="header-anchor">#</a> Jenkins</h2></blockquote> <h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="header-anchor">#</a> <strong>æ¦‚å¿µ</strong></h3> <ul><li>Jenkinsæ˜¯ä¸€æ¬¾å¼€æº CI&amp;CD è½¯ä»¶ï¼Œç”¨äºè‡ªåŠ¨åŒ–å„ç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²è½¯ä»¶ã€‚</li> <li>Jenkins æ”¯æŒå„ç§è¿è¡Œæ–¹å¼ï¼Œå¯é€šè¿‡ç³»ç»ŸåŒ…ã€Docker æˆ–è€…é€šè¿‡ä¸€ä¸ªç‹¬ç«‹çš„ Java ç¨‹åºã€‚</li></ul> <h3 id="ä¸ºä»€ä¹ˆè¦å­¦"><a href="#ä¸ºä»€ä¹ˆè¦å­¦" class="header-anchor">#</a> <strong>ä¸ºä»€ä¹ˆè¦å­¦</strong></h3> <ul><li>å…¬å¸åœ¨ç”¨</li> <li>ç¨å¾®å¥½ä¸€ç‚¹çš„å²—ä½èŒè´£åƒ<code>jenkins</code>ä¹‹ç±» (æŒç»­é›†æˆã€è‡ªåŠ¨éƒ¨ç½²) çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯å¤šå¤šå°‘å°‘æ˜¯ä¼šæåˆ°çš„ã€‚</li> <li>ä¼ ç»Ÿçš„åšæ³•ï¼Œåœ¨æœåŠ¡å™¨åˆå§‹ä¸€ä¸ª <code>git</code> ä»“åº“ï¼Œç„¶åæ¯æ¬¡ä»£ç æ›´æ–°åï¼Œäººå·¥æ‰‹åŠ¨å»æ‹‰å»ï¼Œæ¬¡æ•°å¤šäº†ä¹Ÿå°±çƒ¦äº†ï¼Œè€Œè¿™äº›æ¯æ¬¡åªéœ€åœ¨é¡¹ç›®å¼€å§‹å‰é…ç½®ä¸€é <code>jenkins</code> ä¹‹åæ‰€æœ‰çš„äººå·¥æ“ä½œéƒ½ä¸éœ€è¦ç®¡äº†ã€‚(ps: æœ‰é—®é¢˜ç”©é”…ç»™ <code>jenkins</code> å°±è¡Œäº†[å‘²ç‰™])</li></ul> <h3 id="å‰ç½®ä»»åŠ¡"><a href="#å‰ç½®ä»»åŠ¡" class="header-anchor">#</a> <strong>å‰ç½®ä»»åŠ¡</strong></h3> <ul><li><code>centOs</code> æœåŠ¡å™¨</li> <li><code>git</code>ã€ <code>linux</code>ã€<code>shell</code> åŸºç¡€å°±è¡Œã€‚</li> <li><code>nginx</code>åŸºæœ¬é…ç½®ã€‚</li></ul> <h3 id="å¼€ç¯‡å‡†å¤‡"><a href="#å¼€ç¯‡å‡†å¤‡" class="header-anchor">#</a> <strong>å¼€ç¯‡å‡†å¤‡</strong></h3> <p><strong>åˆå§‹ä¸€ä¸ª <code>vuecli</code> é¡¹ç›®ï¼Œè®¿é—®å¦‚ä¸‹</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97572df9eaafb?w=3318&amp;h=1108&amp;f=png&amp;s=156601" alt=""> <strong>åœ¨ <code>github</code> åˆ›å»ºä»“åº“</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e975c831902e62?w=2488&amp;h=1560&amp;f=png&amp;s=447256" alt=""></p> <p><strong>é…ç½® <code>github webhook</code></strong></p> <p><code>http://ip:8080/github-webhook/</code></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97f623c208cc2?w=2264&amp;h=1600&amp;f=png&amp;s=353667" alt=""></p> <blockquote><h2 id="ç›®å½•"><a href="#ç›®å½•" class="header-anchor">#</a> <strong>ç›®å½•</strong></h2></blockquote> <ul><li><a href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">jenkins ç¯å¢ƒæ­å»º</a></li> <li><a href="#%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1">æ–°å»º jenkins ä»»åŠ¡</a></li> <li><a href="#nginx">nginxè®¿é—®</a></li></ul> <h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="header-anchor">#</a> ç¯å¢ƒæ­å»º</h3> <p>ç™»å½•æœåŠ¡å™¨</p> <p><strong>å®‰è£…<code>java</code>ä¾èµ–</strong></p> <div class="language- extra-class"><pre class="language-text"><code>yum install java
</code></pre></div><p><strong>ä½¿ç”¨ <code>wget</code> æ·»åŠ <code>jenkinsæº</code></strong></p> <div class="language- extra-class"><pre class="language-text"><code>wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo
rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
</code></pre></div><p><strong>å®‰è£…ä¹‹åä½¿ç”¨ <code>yum</code> å‘½ä»¤å°±èƒ½ä¸‹è½½äº†ã€‚</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>yum install jenkins
</code></pre></div><p><strong>jenkins ä¿®æ”¹æƒé™ ç«¯å£ä¹‹ç±»çš„ï¼Œåœ¨è¯¥ä½ç½®</strong></p> <div class="language- extra-class"><pre class="language-text"><code>vim /etc/sysconfig/jenkins
</code></pre></div><ul><li>JENKINS_PORT -&gt; jenkinsçš„<strong>å¯åŠ¨ç«¯å£</strong>ï¼Œé»˜è®¤<code>8080</code></li> <li>JENKINS_USER -&gt; jenkins ç”¨æˆ·ï¼Œä¿®æ”¹ä¸º<code>root</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>// è¿™é‡Œæˆ‘å°† JENKINS_USER ä¿®æ”¹ä¸º root ç”¨æˆ·äº†ã€‚
JENKINS_USER=&quot;root&quot;
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e977fff4cdd93a?w=932&amp;h=262&amp;f=png&amp;s=128287" alt=""></p> <p><strong>ä½¿ç”¨ <code>chown</code>ç»™ <code>jenkins</code> æŒ‡å®šæ‰€æœ‰æƒ</strong></p> <div class="language- extra-class"><pre class="language-text"><code>chown -R root:root /var/lib/jenkins
chown -R root:root /var/cache/jenkins
chown -R root:root /var/log/jenkins
</code></pre></div><p><strong>å¯åŠ¨ <code>jenkins</code></strong></p> <div class="language- extra-class"><pre class="language-text"><code>service jenkins restart
</code></pre></div><p>çœ‹åˆ° ok å³å¯</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e9781cdc4d0d20?w=1022&amp;h=116&amp;f=png&amp;s=56478" alt=""></p> <p><strong>è®¿é—®<code>jenkins</code></strong></p> <div class="language- extra-class"><pre class="language-text"><code>ipåœ°å€ + 8080
</code></pre></div><p>é¦–æ¬¡è®¿é—®æ˜¯è¿™æ ·å­çš„(å®˜ç½‘å›¾).</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e9785b24b1c66d?w=990&amp;h=679&amp;f=jpeg&amp;s=80191" alt=""></p> <p>è¿™å¼ å›¾çº¢è‰²åœˆèµ·æ¥çš„æ›¿æ¢æˆä½ é¡µé¢æ˜¾ç¤ºçš„</p> <div class="language- extra-class"><pre class="language-text"><code>cat /val/jenkins_home/xxxx/xxx
</code></pre></div><p>ç„¶åå°†æ˜¾ç¤ºçš„å¤åˆ¶åˆ° è¾“å…¥æ¡†åï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯ã€‚</p> <p><strong>ç„¶ååˆ°å®‰è£…æ’ä»¶é¡µé¢</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e9788ee23d7956?w=992&amp;h=562&amp;f=webp&amp;s=18674" alt="">
æˆ‘è¿™é‡Œæ˜¯ç‚¹å‡»çš„ å®‰è£…æ¨èæ’ä»¶ é€‰é¡¹ã€‚</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e978ab3e4fa7fb?w=1049&amp;h=711&amp;f=webp&amp;s=15688" alt="">
ç­‰å¾…å³å¯ï¼Œæœ‰ç‚¹æ¼«é•¿ loading...
<br></p> <p><strong>åˆ›å»ºç”¨æˆ·</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e978ce5d84f03b?w=997&amp;h=440&amp;f=webp&amp;s=8020" alt=""> <strong>ç„¶ååˆ°è¿™é‡Œ jenkins å°±å®‰è£…å®Œæ¯•äº†ï¼Œç‚¹å‡»å¼€å§‹ä½¿ç”¨ã€‚</strong> <img src="https://user-gold-cdn.xitu.io/2019/11/23/16e978d39e1efa02?w=1002&amp;h=287&amp;f=webp&amp;s=6772" alt=""> <br></p> <h3 id="æ–°å»ºä»»åŠ¡"><a href="#æ–°å»ºä»»åŠ¡" class="header-anchor">#</a> æ–°å»ºä»»åŠ¡</h3> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97a483911d4c4?w=2892&amp;h=1716&amp;f=png&amp;s=468248" alt=""></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97a72f3a5eceb?w=2380&amp;h=1740&amp;f=png&amp;s=297530" alt="">
æ„å»ºè§¦å‘å™¨ï¼Œå°±æ˜¯ç›‘å¬ <code>github</code> çš„ <code>webhook</code>ï¼Œå¦‚æœ‰æ–°çš„ <code>push</code> å é‡æ–°æ„å»ºã€‚
<img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97f13c9584b74?w=2218&amp;h=1274&amp;f=png&amp;s=224857" alt=""> <img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97a8ef003bf27?w=2480&amp;h=1676&amp;f=png&amp;s=233063" alt="">
æ­¤æ—¶ä¿å­˜å³å¯</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97ab1c9f352c8?w=1462&amp;h=1328&amp;f=png&amp;s=273397" alt="">
ç‚¹å‡»é‚£ä¸ª w åˆ—çš„ğŸŒ(å¤ªé˜³)ï¼Œè¿™é‡Œæ˜¯æ„å»ºçš„æè¿°ï¼Œ
å¦‚æœæ„å»ºå¤±è´¥çš„è¯ï¼Œä½ å¯ä»¥æ ¹æ®è¿™é‡Œçš„æç¤ºå®šä½é—®é¢˜ã€‚</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97ae9d2cc2f2f?w=2218&amp;h=1166&amp;f=png&amp;s=447670" alt="">
è¿™é‡Œæˆ‘å½“æ—¶è’™è”½äº†ä¸€ä¸‹ï¼Œæˆ‘å°±åœ¨æƒ³æ„å»ºåçš„æ–‡ä»¶å»å“ªé‡Œäº†ï¼Œæˆ‘è¯¥æ€ä¹ˆè®¿é—®?</p> <p><strong>æ„å»ºåçš„å­˜æ”¾åœ°å€</strong></p> <div class="language- extra-class"><pre class="language-text"><code>cd /var/lib/jenkins/workspace
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97c2d25d7766e?w=666&amp;h=198&amp;f=png&amp;s=74372" alt=""> <strong>æ­¤æ—¶æˆ‘ä»¬åœ¨å»ä¿®æ”¹ä¸€ä¸‹é…ç½®ä¿¡æ¯ä¸­çš„ <code>shell</code></strong></p> <div class="language- extra-class"><pre class="language-text"><code>node -v
npm -v
npm install
npm run build
</code></pre></div><p>å‘ç°æ„å»ºå¤±è´¥??</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97c80f626adc0?w=2060&amp;h=1128&amp;f=png&amp;s=412669" alt="">
ä¸è¿‡æ²¡å…³ç³»</p> <p>æˆ‘ä»¬è¿›å…¥å…¨å±€è®¾ç½®çš„æ’ä»¶ç®¡ç†</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97d00ff0d17fe?w=2416&amp;h=664&amp;f=png&amp;s=138227" alt="">
ä¸‹è½½å®Œåï¼Œæˆ‘ä»¬å»å…¨å±€é…ç½®ç®¡ç†ï¼Œå‘ç°å¯¹äº† ä¸€ä¸ª NodeJs é€‰é¡¹ã€‚</p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97dba6c7d3eea?w=2456&amp;h=1556&amp;f=png&amp;s=613978" alt=""></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97df209f5c541?w=1890&amp;h=1514&amp;f=png&amp;s=252702" alt="">
å•Š åƒè¾›ä¸‡è‹¦ï¼Œç»ˆäºçœ‹åˆ° æˆ‘ä»¬æœ€çˆ±çš„ <code>dist</code> æ–‡ä»¶äº†ï¼Œè¿™é‡Œä½ çš„ shell å‘½ä»¤å¯ä»¥è‡ªåŠ¨æ‹“å±•ï¼Œå¦‚ç§»åŠ¨åˆ°å…¶ä»–ä½ç½®ã€‚
<img src="https://user-gold-cdn.xitu.io/2019/11/23/16e97e71a410c751?w=2360&amp;h=1092&amp;f=png&amp;s=353467" alt=""></p> <h3 id="nginx"><a href="#nginx" class="header-anchor">#</a> nginx</h3> <div class="language- extra-class"><pre class="language-text"><code>cd /etc/nginx/conf.d
vim test-jenkins.conf

server {
      listen 8000; # ç›‘å¬ç«¯å£
      server_name _;
      location / {
        # è¿™é‡Œæˆ‘è¿™é‡ŒæŒ‡å‘ jenkins æ„å»ºçš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥åœ¨æ„å»ºæ—¶çš„ shell å°†æ–‡ä»¶ç§»åŠ¨è¦å…¶ä»–åœ°æ–¹ã€‚
        root  /var/lib/jenkins/workspace/test-jenkins/dist;
        try_files $uri $uri/ index.html;
      }

      error_page 500 502 503 504 /50x.html;
      location = /50x.html {
        root /usr/share/nginx/html;
      }
}
</code></pre></div><p><strong>ç„¶åæ‰“å¼€å°± ip:8000 å°±èƒ½è®¿é—®äº†ã€‚</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e9804b2bf8f65f?w=2890&amp;h=778&amp;f=png&amp;s=121151" alt=""></p> <h3 id="last"><a href="#last" class="header-anchor">#</a> <strong>last</strong></h3> <p>æˆ‘ä»¬åœ¨æœ¬åœ° é‡æ–° <code>push</code> ï¼Œçœ‹ä¸‹è¿™ä¸ªé¡µé¢ä¼šä¸ä¼šå˜ã€‚</p> <p>æˆ‘ä»¬åˆ·æ–°é¡µé¢å¦‚æœå‘ç° <code>404 Not Found</code> ä¸è¦æ–¹ï¼Œ<code>npm run build</code> ä¼šå…ˆåˆ é™¤ <code>dist</code> æ–‡ä»¶ã€‚</p> <p><strong>è®¿é—®å¦‚ä¸‹å°±è¯´æ˜æˆ‘ä»¬åŸºæœ¬é…ç½®å…¨éƒ¨å®Œæˆäº†ï¼Œ</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/11/23/16e980b30c15e52b?w=1972&amp;h=426&amp;f=png&amp;s=83982" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/feat/pages/node.html">node</a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.7e52a773.js" defer></script><script src="/blog/assets/js/2.49ba155e.js" defer></script><script src="/blog/assets/js/10.6f95f390.js" defer></script>
  </body>
</html>
